## Harness GitOps Agent - Overrides File
## For default overrides, please refer to https://github.com/harness/gitops-helm/blob/main/values.yaml
## Argo CD overrides can be found at https://github.com/argoproj/argo-helm/blob/main/charts/argo-cd/values.yaml

# <---Argo CD image details--->
global:
  image:
    repository: harness/argocd
    tag: v2.10.14

# <---Harness configuration overrides--->
harness:
  identity:
    accountIdentifier: cbwZLIifQRuvfAEoXOwLdA
    orgIdentifier: 
    projectIdentifier: 
    agentIdentifier: getflowmanager

  secrets:
    agentSecret: LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFdmdJQkFEQU5CZ2txaGtpRzl3MEJBUUVGQUFTQ0JLZ3dnZ1NrQWdFQUFvSUJBUUN0QjI5YlJRcUhnT0dWCng3U2pET1NpbkwwYnI3eklwUjRneGFuV05oVnZXUTF4dmdOdHU4WXk1ZFZ6TENGVGZXL3NKNDZjN2dWWGp6M2MKdmFKM0hmQUZoeldZSW5JSEUxVWoxMVY2TkpHQjZ2K2JRMzZnd1FBSHFxUVlSTVZYOE1WVWp4c3BKTEpTQXMrUAovZkRVVlhsVzZYQjEyR254bVVabW11RStjWjBOVWZoSGxvUzFkN05zL0RmRHkzdTdibEFmOVI2NlFlSEVDamhQClErbTNvVVM2T20wSEdvNlpIS1g4WFhjaWFrZndhbE9zR2Ywdys4T3VzRVY0L2lpcTdxZHlPYzgyd0ZTWUl0M1oKOTEyNTg3N0pGWGRxc1hweEdkSEo5RWRrMlhEL3RXZ0E3dzlqdnJrSTVwVVh5cEZSbEJiWlE5SHNMYTBwRE5yaQpIY3Z5d2hYdEFnTUJBQUVDZ2dFQkFLSElLdUYrdTJxWklkT25CNG5RdTFJa0ZWbDJ4cUFnYXZ3ZmRUNDZFVzZzCktEcnFmRkEwMnd1cUJCc003eGdlVi9ESng3bUpmK3N2bnBydm9LR1psMXZENFdPZkNWaitSWVFlaWVpYWtGYVcKUUdxUEFDNFVady9FQ0d3OG1Qd3h2bi9pMG5WMHYxcVpFRFBGTDFHSm5jdWF0ekVvcVY1aGZ3YmUxNjVJRXAxcApOVWc1aVlia3J1U1JkTWtGTXVhNjhVWWdVeXY2dlZ2N2luOW5hS2svS1E5M056bXp2UkhkdmZaV05UTTlFdVpmCisvaStOUUtUR0R3ZjJqSG55STkyL01McEI2ZzF4KzV4TG1EcitBOVpnUTdZNE00SGltMVluTERhbTlvcHVDelMKRWZldi9KVDVzdlEybS8rLy9LYit4U0R4WFVaQ21ibXdSTHIvZmR4eDhhRUNnWUVBNUV6Q01LaG5DQjBqb0NBdApHTnlPNW9EN1h6U0hzSklaQ2tEdnF4QkRuUEw5SlJaeHEyQURwbVVmdFQ3WHlzYjlueEVYTXF5L0pxVERuU3lHCmhmMlFvS05RYk9sbmtaRzl6M2IwMGZuRWExN2Y4b1pUbFlRZ2ZlbTVMdTBwbFFrYnYwa3lPMHlXQysrZzRxMHUKZHFHMUtNcUVmVGNmTElNbGl3K3hwV0ZlVjhVQ2dZRUF3Z1hueHR1bFIvQmFrSm9RY28zZDVXTDFycE4rVFgzOQplQVgxRHdENGtick1BS3NDSjQ5bDhlWmtaam90QTlSb2EvNUFxelNKa3BPbTU0UjJPSy9JcndGQklZNzhWMDRRClJ5SDVORnYxVWZ3UUhPekpwUllBNHBHMmhCSVQxdmtJNnVnbVNsemIremdGdHJ3WHVmT0dCdUQ2WXZ2MEhyN1cKSGwxWk0zSzlBQWtDZ1lFQWk2enFvaHBsN3ZEayt2SzBwS0ZNVEhwZFVNSXl3alNnWFVXZFhHdDI4bTgzc1prcApzay9yNjhHeXhKRE9OYUhKU2FpTEtOWEhuVHp3OFJoc3RVMk5UcnFjV2dYeTkzelRSRHJqVGhRaHVBOHp0STI2ClZaK2d3V2hkZy9oVm1Ia2FJTTRIallBdHpOK3U3d0JGalE4aVp2S0FYSnQ4MXg3bHVVN0F3UTN4U29FQ2dZQjYKN2VqckdyRSt3aTl2WE4yODV0dkhnWXF0NEc5dXc3dTd0dktNWGc0ZnJ4MmY4cmw3dlNSWFBxVXdDLzRIWmlYKwovbW1VejhXMlkreWsxVTFlSHlua2o4UG5ja081UVJHWk1CSkh0VmZhYVAwQWhwcEFDWS9uL1hDSmZ6YW94c0o2CnF6blBkY1EvQ0VDK2hhLzJ0aStkM2g5bVpjSkhWSnd2UXUvSVpCTVJtUUtCZ0M4ZUk0UThZTjhsUWJ1RE03dXYKQXoraFJyVW5VRHdBQzZXRHUyY0tLOU9NRFNmTDFxVVowSWpMVjJzS3BwSkRnekRPRGR1QjJwbWsvSmNjelErZgpSaFJHcDR4cW5GZUxpSWU3ZUR5YUJodE1vU016bFJpb3RJN0loVnhKdDVidHYvWENqQmxxdGZ0Y3A2anRaMlp3CmdpNFlIS1lmUDRqZGhyVmJXMks2OWpDNwotLS0tLUVORCBSU0EgUFJJVkFURSBLRVktLS0tLQo=
    # <---CA data overrides--->
    caData:
      enabled: false
      secret: 

  gitopsServerHost: https://app.harness.io/prod1/gitops
  networkPolicy:
    create: false
  createClusterRoles: true

  configMap:
    logLevel: debug

    # <---Agent communication protocol details--->
    http:
      agentHttpTarget: https://app.harness.io/gitops
      tlsEnabled: false
      certPath: /tmp/ca.bundle

  # <---Disaster Recovery override values--->
  disasterRecovery:
    enabled: false
    identifier: 

  # <---Openshift override values--->
  openshift:
    enabled: false

# <---Argo CD configuration overrides--->
argo-cd:
  enabled: false

  ## IMPORTANT: Mark crds as false for Helm installations if they are already installed in the cluster
  crds:
    install: false

  configs:
    cm:
      cluster.inClusterEnabled: true

  # <---Redis image details--->
  redis:
    enabled: true
    image:
      repository: redis
      tag: 7.2.4-alpine

  # <---High Availability Agent (HA) values--->
  redis-ha:
    enabled: false
    image:
      repository: redis
      tag: 7.2.4-alpine
    haproxy:
      enabled: false
      image:
        repository: haproxy
        tag: 2.6.14-alpine

  repoServer:
    replicas:  1 
    env:
      - name: HELM_PLUGINS
        value: /helm-sops-tools/helm-plugins/
      - name: HELM_SECRETS_CURL_PATH
        value: /helm-sops-tools/curl
      - name: HELM_SECRETS_SOPS_PATH
        value: /helm-sops-tools/sops
      - name: HELM_SECRETS_KUBECTL_PATH
        value: /helm-sops-tools/kubectl
      - name: HELM_SECRETS_BACKEND
        value: sops
      - name: HELM_SECRETS_VALUES_ALLOW_SYMLINKS
        value: "false"
      - name: HELM_SECRETS_VALUES_ALLOW_ABSOLUTE_PATH
        value: "true"
      - name: HELM_SECRETS_VALUES_ALLOW_PATH_TRAVERSAL
        value: "false"
      - name: HELM_SECRETS_WRAPPER_ENABLED
        value: "true"
      - name: HELM_SECRETS_HELM_PATH
        value: /usr/local/bin/helm
    

    # <---SOPS override values--->
    initContainers:
      - name: sops-helm-secrets-tool
        image: harness/gitops-agent-installer-helper:v0.0.1
        imagePullPolicy: IfNotPresent
        command: [ sh, -ec ]
        args:
          - |
            cp -r /custom-tools/. /helm-sops-tools
            cp /helm-sops-tools/helm-plugins/helm-secrets/scripts/wrapper/helm.sh /helm-sops-tools/helm
            chmod +x /helm-sops-tools/*
        volumeMounts:
          - mountPath: /helm-sops-tools
            name: helm-sops-tools

# <---Agent overrides--->
agent:
  harnessName: getflowmanager
  image:
    repository: harness/gitops-agent
    tag: v0.78.0

  replicas: 1

  highAvailability: false
  # <---Agent Proxy Config overrides--->
  proxy:
    enabled: false
    httpProxy: 
    httpsProxy: 

# <---Agent upgrader overrides--->
upgrader:
  enabled: true
  image: harness/upgrader:latest