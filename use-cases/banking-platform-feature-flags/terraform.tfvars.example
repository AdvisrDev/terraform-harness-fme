# Banking Platform Feature Flags Configuration
# Copy this file to terraform.tfvars and customize for your environment

# Organization Configuration (must match administration setup)
organization_name = "SecureBank"
platform_owner    = "platform-engineering@securebank.com"
primary_region   = "us-east-1"

# Administration Integration (from administration module outputs)
# These values should be populated from the banking-platform-administration outputs
workspace_id     = "workspace-abc123"           # From administration module
environment_id   = "environment-def456"        # From administration module
environment_name = "development"               # Target environment
traffic_type_id  = "traffic-type-ghi789"      # Primary traffic type (customer)

# Feature Flag Configuration
feature_rollout_strategy = "gradual"
max_rollout_percentage   = 50
enable_kill_switch      = true

# Banking Feature Categories
banking_feature_categories = [
  "customer-experience",
  "security", 
  "compliance",
  "analytics",
  "payments"
]

# Feature Category Toggles
security_features_enabled    = true
compliance_features_enabled  = true
ai_features_enabled         = true

# Environment-specific Overrides
environment_feature_overrides = {
  development = {
    default_treatment        = "off"
    max_rollout_percentage   = 100
    enable_advanced_features = true
    automated_rollback      = false
  }
  testing = {
    default_treatment        = "off"
    max_rollout_percentage   = 100
    enable_advanced_features = true
    automated_rollback      = true
  }
  staging = {
    default_treatment        = "off"
    max_rollout_percentage   = 50
    enable_advanced_features = false
    automated_rollback      = true
  }
  production = {
    default_treatment        = "off"
    max_rollout_percentage   = 25
    enable_advanced_features = false
    automated_rollback      = true
  }
}


# Feature-specific Configuration
biometric_auth_config = {
  enabled              = true
  supported_auth_types = ["fingerprint", "face_id", "voice"]
  fallback_enabled     = true
  timeout_seconds      = 30
}

fraud_detection_config = {
  enabled              = true
  ml_models           = ["behavioral", "network", "device", "transaction_pattern"]
  confidence_threshold = 0.8
  real_time_scoring   = true
}

compliance_config = {
  kyc_enhanced_enabled = true
  gdpr_tools_enabled   = true
  automated_reporting  = false  # Enable in production
  audit_trail_enabled  = true
}

# Targeting Configuration
segment_targeting_enabled = true

high_value_customer_features = [
  "robo_advisor",
  "instant_transfers", 
  "enhanced_mobile_dashboard",
  "business_analytics_dashboard"
]

compliance_customer_features = [
  "enhanced_kyc_verification",
  "gdpr_compliance_tools"
]

# Performance Configuration
feature_flag_cache_ttl = 300    # 5 minutes

# Additional Tags
additional_tags = {
  Department        = "Banking Technology"
  Application       = "Digital Banking Platform"
  Environment       = "development"  # Should match environment_name
  Criticality      = "High"
  DataClassification = "Restricted"
  FeatureFlags     = "Enabled"
}

# Environment-specific Examples:

# For Development Environment:
# environment_name = "development"
# max_rollout_percentage = 100
# enable_advanced_features = true

# For Testing Environment: 
# environment_name = "testing"
# max_rollout_percentage = 100
# automated_rollback = true

# For Staging Environment:
# environment_name = "staging" 
# max_rollout_percentage = 50

# For Production Environment:
# environment_name = "production"
# max_rollout_percentage = 25
# automated_rollback = true